!function(e){function t(e){return null!==e&&""!==e.trim()}function a(e){var t=e.attr("data-length"),a=e.val(),i=!1;if(t.indexOf("-")>-1&&(i=!0),i){var n=parseInt(t.split("-")[0]),r=parseInt(t.split("-")[1]);return a.length>=n&&a.length<=r}var l=0;return"min"==t.split(" ")[0]?(l=parseInt(t.split(" ")[1]),a.length>=l):"max"==t.split(" ")[0]?(l=parseInt(t.split(" ")[1]),a.length<=l):void 0}function i(e){var t=/^[0-9]*$/;return!e.search(t)}function n(e){var t=/^[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]*$/;return!e.search(t)}function r(e){var t=/^[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\s]*$/;return!e.search(t)}function l(e){var t=/^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z\s]{2,4})$/;return!e.search(t)}function s(e){var t=/(?:\d*\.)?\d+/;return!e.search(t)}function o(e){for(var t=!0,a=e[0],i=1;i<e.length;i++)if(e[i]!=a){t=!1;break}return t}function d(e){return null!==e&&""!==e.trim()}function u(e,t){var a=0,i=0,n=0,r=[];if(void 0!==t&&""!==t||(t="(dd/mm/yyyy)"),t.indexOf("/")>-1){if(!/^\d{2}\/\d{2}\/\d{4}$/.test(e))return!1;r=e.split("/")}else{if(!/^\d{2}\-\d{2}\-\d{4}$/.test(e))return!1;r=e.split("-")}if(n=r[2],"d"===t[1]?(a=r[0],i=r[1]):"m"===t[1]&&(a=r[1],i=r[0]),n<1e3||n>3e3||0==i||i>12)return!1;var l=[31,28,31,30,31,30,31,31,30,31,30,31];return(n%400==0||n%100!=0&&n%4==0)&&(l[1]=29),a>0&&a<=l[i-1]}function c(e){for(var t=!0,a=0;a<e.length;a++)if("<"===e[a]||">"===e[a]){t=!1;break}return t}e.fn.formValidation=function(m){function v(e){var a=!0,i=(e.val(),e.attr("required-field")),n=e.attr("validation-type"),r=e.attr("type");return t(e.val())?void 0!==n&&(p(e,!0)||(a=!1)):void 0!==i&&("checkbox"===r?e.prop("checked")||(a=!1):a=!1),a}function p(e,t){var a=e.val(),o=e.attr("validation-type"),f="";o.indexOf("dateformat(")>-1&&(f=o.substring(o.indexOf("("),o.length),o="dateformat");var m=0,v=[{name:"letters",functionName:n(a),defaultMessage:g.alerts.letters},{name:"numbers",functionName:i(a),defaultMessage:g.alerts.numbers},{name:"email",functionName:l(a),defaultMessage:g.alerts.email},{name:"price",functionName:s(a),defaultMessage:g.alerts.price},{name:"letters-numbers",functionName:r(a),defaultMessage:g.alerts.lettersNumbers},{name:"select",functionName:d(a),defaultMessage:g.alerts.select},{name:"dateformat",functionName:u(a,f),defaultMessage:g.alerts.dateformat},{name:"html",functionName:c(a),defaultMessage:g.alerts.html}];for(m=0;m<v.length&&o!==v[m].name;m++);return t?v[m].functionName:v[m].defaultMessage}function h(e,t,a){if(t.removeAttr("style"),t.parent().find(".fvp_validation_alert").remove(),e){t.position(),t.outerHeight();var i="";for(var n in g.style)i+=n+":"+g.style[n]+";";alertHtml='<div class="fvp_validation_alert" style="'+i+'"><span style="color: #fff;font-size: 14px;">'+a+"</span></div>",t.parent().append(alertHtml),t.css("outline","1px solid "+g.style.background)}}var g=e.extend({},m);void 0!==m.alerts&&Object.keys(m.alerts).forEach(function(e,t){f.alerts[e]=m.alerts[e]}),void 0!==m.style&&Object.keys(m.style).forEach(function(e,t){f.style[e]=m.style[e]}),void 0!==m.mainAlert&&(f.mainAlert=m.mainAlert),void 0!==m.onSubmitFail&&(f.onSubmitFail=m.onSubmitFail),void 0!==m.onSubmitSuccess&&(f.onSubmitSuccess=m.onSubmitSuccess),g=f;var b="input[validation-type], textarea[validation-type], input[required-field], textarea[required-field], select[required-field], input[data-length], textarea[data-length]",y="input[match-field], textarea[match-field]";return this.each(function(){function i(e,i,l){var s=e.attr("required-field"),o=e.attr("data-length"),d=(e.attr("match-field"),e.attr("type"));isNaN(i)&&(i=n.find(b).index(e)),void 0===l&&(l=""),h(!1,e),v(e)?(r.fields[i].isValid=!0,h(!1,e),void 0!==o&&!a(e)&&t(e.val())&&(r.fields[i].isValid=!1,"keyup"!==l&&h(!0,e,r.fields[i].lengthText))):(r.fields[i].isValid=!1,"keyup"!==l&&(t(e.val())?h(!0,e,r.fields[i].alertText):void 0!==s&&(e.is("select")?h(!0,e,r.fields[i].alertText):"checkbox"===d?h(!0,e,g.alerts.checkbox):h(!0,e,g.alerts.null))))}var n=e(this),r={};r.fields=[],r.match=!0,r.submitValidation=!0,n.find(b).each(function(t){var a=e(this);a.parent().css("position","relative");var n=a.attr("required-field"),l=a.attr("validation-type"),s=(a.attr("match-field"),a.attr("data-length")),o=a.attr("alert-message"),d={};d.isValid=!0,void 0!==n&&(d.isValid=!1),void 0!==s&&(d.lengthText="Este campo debe tener",s.indexOf("-")>-1?d.lengthText+=" entre "+s.split("-")[0]+" y "+s.split("-")[1]:("min"==s.split(" ")[0]?d.lengthText+=" al menos ":d.lengthText+=" como maximo ",d.lengthText+=s.split(" ")[1]),d.lengthText+=" caracter(es)"),void 0!==o?d.alertText=o:a.is("select")?d.alertText=g.alerts.select:void 0!==l&&(d.alertText=p(a,!1)),r.fields.push(d),a.bind("blur change keyup",function(e){i(a,t,e.type)})}),n.find(y).each(function(){e(this).bind("blur change keyup",function(t){var a=[];n.find(y).each(function(t){a.push(e(this).val())}),o(a)?(r.match=!0,h(!1,n.find(y).eq(n.find(y).length-1))):(r.match=!1,"keyup"!==t.type&&h(!0,n.find(y).eq(n.find(y).length-1),g.alerts.match))})}),n.submit(function(t){var a=!0;n.find(b).each(function(t){i(e(this),t)});for(var l=0;l<r.fields.length;l++)if(!1===r.fields[l].isValid){a=!1;break}return r.match&&a?r.submitValidation=!0:r.submitValidation=!1,r.submitValidation?(g.onSubmitSuccess(),!0):(g.onSubmitFail(),!0===g.mainAlert&&alert(g.alerts.main),!1)})})};var f={mainAlert:!1,alerts:{main:"¡Por favor verifica bien todos los campos antes de enviar!",null:"Completa este campo",letters:"Solo se permiten letras en este campo.",lettersNumbers:"Solo se permiten numeros y letras en este campo",numbers:"Solo se permiten numeros en este campo.",email:"Email invalido, verifica que no haya mayusculas ni espacios entre el correo.",price:"Intoruce un formato valido de precio.",match:"Las contraseñas no coinciden.",select:"Elige una opción",checkbox:"Marca este campo para continuar",dateformat:"Formato de fecha debe ser (dd/mm/aaaa) y ser una fecha valida.",html:"Hay un caracter invalido."},style:{position:"relative","z-index":0,padding:"4px",background:"red"},onSubmitFail:function(){},onSubmitSuccess:function(){}}}(jQuery);